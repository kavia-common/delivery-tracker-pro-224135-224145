# Alembic configuration file (template)
# This file is provided as a starting point if you choose to manage migrations from this repository.
# If you manage Alembic in the backend repository, keep this file as documentation only.

[alembic]
# The base directory that contains env.py and versions/
# For centralized migrations in this repo, keep as "alembic"
# For backend-driven migrations, this file serves as a reference only.
script_location = alembic

# Location of generated versions inside the script_location
# Alembic >=1.10 honors version_path_separator. "os" means use OS-specific path separator.
version_path_separator = os

# (Optional) Add timezone to rendered migration templates in recent Alembic versions
# timezone = utc

[loggers]
keys = root,sqlalchemy,alembic

[handlers]
keys = console

[formatters]
keys = generic

[logger_root]
level = WARN
handlers = console
qualname =

[logger_sqlalchemy]
level = WARN
handlers =
qualname = sqlalchemy.engine

[logger_alembic]
level = INFO
handlers =
qualname = alembic

[handler_console]
class = StreamHandler
args = (sys.stderr,)
level = NOTSET
formatter = generic

[formatter_generic]
format = %(asctime)s %(levelname)-5.5s [%(name)s] %(message)s

# Database connection URL (override with env var when running Alembic)
# IMPORTANT:
# - When running Alembic from this repo, ensure the .env provides DATABASE_URL or export it in the shell.
# - Example (psycopg3): postgresql+psycopg://user:password@host:port/dbname
# - Example (psycopg2): postgresql+psycopg2://user:password@host:port/dbname
# If both sqlalchemy.url and DATABASE_URL env var are present, the env var takes precedence when referenced by env.py.
sqlalchemy.url = %(DATABASE_URL)s
